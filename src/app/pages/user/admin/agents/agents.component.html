<app-spinner *ngIf="loading"></app-spinner>
   <div style="display: flex; flex-direction: row; font-family: 'Montserrat';">
        <!-- Modal de asignación de desapcho -->
        <div *ngIf="false" class="modal">
            <div class="modal-content">
              <span class="close">&times;</span>
              <h2 style="font-weight: 500;">Despacho de energía</h2>
              <h3 style="font-weight: 400;">¿Deseas despachar xxx MW al generador XXX?</h3>
              <button mat-button style="height: 4rem;">Sí</button>
              <button mat-button style="height: 4rem;">No</button>
            </div>
          </div>
        <app-nav-admin style="width: 25rem; box-shadow: 4px 0px 8px 0px #0000001A;"></app-nav-admin>
        <!-- Visual de agentes por acción -->
        <div class="admin-container ">
            <app-header [name]="'Administrador'"></app-header>
            <div class="content-margin">
                <h2 class="title">Agentes registrados</h2>
        
                <div class="filter-section">
                <div style="padding: 1.5rem;">
                    <h3 class="filter-title">Filtros</h3>
                    <div class="grid-container-4">
                    <div>
                        <label for="small-input">Empresa</label>
                        <input type="text">
                    </div>
                    <div>
                        <label for="small-input">Contacto</label>
                        <input type="text">
                    </div>
                    <div>
                        <label for="small-input">Ubicación</label>
                        <input type="text">
                    </div>
                    <div>
                        <label for="small-input">Correo</label>
                        <input type="text">
                    </div>
                    </div>
                    <div class="grid-container-3">
                    <div>
                        <label for="small-input">Tipo de agente</label>
                        <select 
                            class="select-style ">
                        <option value="1">Generador</option>
                        </select>
                    </div>
                    <div>
                        <label for="small-input">Estado</label>
                        <select 
                        class="select-style "
                        >
                        <option value="1">Pendiente</option>
                        </select>
                    </div>
                    <div>
                        <label for="small-input">Acciones</label>
                        <select 
                        style="
                            background-color: #f7fafc;
                            border: 1px solid #d2d6dc;
                            color: #4b5563;
                            font-size: 0.875rem;
                            border-radius: 0.375rem;
                            outline: none;
                            width: 100%;
                            padding: 0.625rem;">
                        <option value="1">Aceptado</option>
                        </select>
                    </div>
                    </div>
                </div>
                </div>
                <div class="scroll-container">
        
                <table mat-table *ngIf="users" [dataSource]="users.slice((pageIndex) * pageSize, (pageIndex + 1 ) * pageSize)" class="mat-elevation-z8">
                    <ng-container matColumnDef="company_name">
                    <th mat-header-cell *matHeaderCellDef class="font-montserrat" style="border-top-left-radius: 0.5rem; border-bottom-left-radius: 0.5rem;"> Empresa </th>
                    <td mat-cell *matCellDef="let element"> {{element.company_name}} </td>
                    </ng-container>
            
                    <ng-container matColumnDef="contact">
                    <th mat-header-cell *matHeaderCellDef class="font-montserrat"> Contacto </th>
                    <td mat-cell *matCellDef="let element"> {{element.contact}} </td>
                    </ng-container>
            
            
                    <ng-container matColumnDef="location">
                    <th mat-header-cell *matHeaderCellDef class="font-montserrat"> Ubicación </th>
                    <td mat-cell *matCellDef="let element"> {{element.location}} </td>
                    </ng-container>
            
                    <ng-container matColumnDef="email">
                    <th mat-header-cell *matHeaderCellDef class="font-montserrat"> Correo </th>
                    <td mat-cell *matCellDef="let element"> {{element.email}} </td>
                    </ng-container>
            
                    <ng-container matColumnDef="agent_name" >
                    <th mat-header-cell *matHeaderCellDef class="font-montserrat"> Tipo de agente </th>
                    <td mat-cell *matCellDef="let element"> {{element.agent_name}} </td>
                    </ng-container>
            
                    <ng-container matColumnDef="status">
                    <th mat-header-cell *matHeaderCellDef class="font-montserrat"> Estado </th>
                    <td mat-cell *matCellDef="let element"> {{element.status}} </td>
                    </ng-container>
            
                    <ng-container matColumnDef="actions">
                    <th mat-header-cell *matHeaderCellDef class="font-montserrat" style="border-top-right-radius: 0.5rem; border-bottom-right-radius: 0.5rem;"> Acciones </th>
                    <td mat-cell *matCellDef="let element"> 
                        <div class="mat-icon-button-custom" style="display: flex;">
                            <button [disabled]="disabledButton(element.active)" class="action-icon-green"  [ngStyle]="{ 'background-color': disabledButton(element.active) ? 'gray' : null }" (click)="updateUserStatusActive(element.user_id)">
                                <mat-icon style="color: white; font-size: 22px;">done</mat-icon>
                            </button>
                            
                            <button [disabled]="disabledButton(element.active)" class="action-icon-red" [ngStyle]="{ 'background-color': disabledButton(element.active) ? 'gray' : null }" (click)="updateUserStatusRejected(element.user_id)">
                                <mat-icon style="color: white; font-size: 22px;">close</mat-icon>
                            </button>
                       
                        </div>
                    </td>
                    </ng-container>
            
                    <!-- Define las columnas que se mostrarán -->
                    <tr mat-header-row *matHeaderRowDef="userColumns" class="table-header"></tr>
                    <tr mat-row *matRowDef="let row; columns: userColumns;" class="font-montserrat"></tr>
                </table>
                <mat-paginator 
                class="font-montserrat" 
                (page)="handlePageEvent($event)"
                [length]="length"
                [pageSizeOptions]="[5, 10, 15]" 
                showFirstLastButtons></mat-paginator>
            </div>
            </div>
        </div>

    </div>